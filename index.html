<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASMETO 2026 - Gestor de Futebol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .punished { filter: grayscale(1) contrast(1.2); opacity: 0.5; pointer-events: none; }
        .timer-active { color: #f87171; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 font-sans min-h-screen">

    <header class="bg-slate-800 p-4 sticky top-0 z-50 shadow-2xl border-b border-slate-700">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center font-black">A</div>
                <h1 class="text-lg font-bold tracking-tighter">ASMETO <span class="text-blue-500">2026</span></h1>
            </div>
            <div id="active-session-title" class="text-xs font-mono bg-slate-700 px-3 py-1 rounded text-blue-400 uppercase">Sem Sessão Ativa</div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-3 pb-24 space-y-6">
        
        <!-- Tabs -->
        <div class="flex bg-slate-800 p-1 rounded-xl shadow-inner border border-slate-700">
            <button onclick="showTab('setup')" class="tab-btn flex-1 py-3 text-xs font-bold rounded-lg transition-all bg-blue-600">SESSÃO</button>
            <button onclick="showTab('players')" class="tab-btn flex-1 py-3 text-xs font-bold rounded-lg transition-all">ELENCO</button>
            <button onclick="showTab('match')" class="tab-btn flex-1 py-3 text-xs font-bold rounded-lg transition-all">JOGO</button>
            <button onclick="showTab('rank')" class="tab-btn flex-1 py-3 text-xs font-bold rounded-lg transition-all">RANKING</button>
        </div>

        <!-- Tab: Setup -->
        <section id="tab-setup" class="tab-content space-y-4">
            <div class="bg-slate-800 p-5 rounded-2xl border border-slate-700 shadow-xl">
                <h3 class="text-sm font-bold text-slate-400 mb-4 uppercase">Configurar Pelada</h3>
                <input id="in-session-name" type="text" placeholder="Nome da Pelada (ex: Final de Semana)" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 mb-3 focus:ring-2 focus:ring-blue-500 outline-none">
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="bg-slate-900 p-3 rounded-xl border border-slate-700 text-center">
                        <label class="block text-[10px] text-slate-500 mb-1">Jogadores / Time</label>
                        <input id="in-team-size" type="number" value="7" class="bg-transparent text-xl font-bold text-center w-full outline-none">
                    </div>
                    <div class="bg-slate-900 p-3 rounded-xl border border-slate-700 text-center">
                        <label class="block text-[10px] text-slate-500 mb-1">Tempo Partida (Min)</label>
                        <input id="in-match-time" type="number" value="10" class="bg-transparent text-xl font-bold text-center w-full outline-none">
                    </div>
                </div>
                <button onclick="startNewSession()" class="w-full bg-blue-600 hover:bg-blue-500 py-4 rounded-xl font-black text-sm shadow-lg shadow-blue-900/20 transition-all">INICIAR NOVA SESSÃO</button>
                <button onclick="clearAllData()" class="w-full mt-4 text-[10px] text-red-400 uppercase font-bold opacity-50 hover:opacity-100">Limpar Todos os Dados (Reset)</button>
            </div>
        </section>

        <!-- Tab: Players -->
        <section id="tab-players" class="tab-content hidden space-y-4">
            <div class="bg-slate-800 p-5 rounded-2xl border border-slate-700 shadow-xl">
                <h3 class="text-sm font-bold text-slate-400 mb-4 uppercase">Novo Atleta</h3>
                <div class="flex flex-col gap-4">
                    <div class="relative w-full aspect-video bg-black rounded-xl overflow-hidden border border-slate-700">
                        <video id="webcam" class="w-full h-full object-cover" autoplay playsinline></video>
                        <canvas id="photo-canvas" class="hidden"></canvas>
                        <img id="photo-preview" class="absolute inset-0 w-full h-full object-cover hidden">
                        <div class="absolute bottom-3 left-0 right-0 flex justify-center gap-2">
                            <button onclick="takeSnapshot()" class="bg-white text-black px-4 py-2 rounded-full text-xs font-bold shadow-xl">TIRAR FOTO</button>
                        </div>
                    </div>
                    <input id="in-player-name" type="text" placeholder="Nome do Jogador" class="bg-slate-900 border border-slate-700 rounded-xl p-4 outline-none">
                    <button onclick="registerPlayer()" class="w-full bg-green-600 py-4 rounded-xl font-black text-sm">CADASTRAR E PRIORIZAR</button>
                </div>
            </div>

            <div class="bg-slate-800 p-5 rounded-2xl border border-slate-700">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-sm font-bold text-slate-400 uppercase">Lista de Presença</h3>
                    <button onclick="runAutomaticDraw()" class="text-[10px] bg-blue-600 px-3 py-1 rounded-full font-bold">GERAR SORTEIO</button>
                </div>
                <div id="roster-list" class="grid grid-cols-1 sm:grid-cols-2 gap-2"></div>
            </div>
        </section>

        <!-- Tab: Match -->
        <section id="tab-match" class="tab-content hidden space-y-4">
            <div class="bg-slate-800 p-6 rounded-3xl border-2 border-slate-700 shadow-2xl relative overflow-hidden">
                <div class="flex justify-between items-center mt-4">
                    <div class="text-center flex-1">
                        <div class="text-xs font-bold text-blue-400 mb-2">TIME A</div>
                        <div id="match-score-a" class="text-6xl font-black tabular-nums">0</div>
                        <div id="match-wins-a" class="text-[10px] text-slate-500 mt-2 uppercase font-bold tracking-widest">Vitórias: 0/3</div>
                    </div>
                    
                    <div class="px-4 text-center">
                        <div id="match-timer" class="text-4xl font-mono font-bold text-white mb-2">10:00</div>
                        <button id="btn-play-pause" onclick="toggleTimer()" class="w-12 h-12 bg-white text-black rounded-full flex items-center justify-center shadow-xl mx-auto">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path id="timer-icon" d="M8 5v14l11-7z"/></svg>
                        </button>
                    </div>

                    <div class="text-center flex-1">
                        <div class="text-xs font-bold text-red-400 mb-2">TIME B</div>
                        <div id="match-score-b" class="text-6xl font-black tabular-nums">0</div>
                        <div id="match-wins-b" class="text-[10px] text-slate-500 mt-2 uppercase font-bold tracking-widest">Vitórias: 0/3</div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3">
                <div class="bg-blue-900/20 p-3 rounded-2xl border border-blue-500/30">
                    <h4 class="text-[10px] font-bold text-blue-400 mb-2 uppercase">Campo A</h4>
                    <div id="list-team-a" class="space-y-2"></div>
                </div>
                <div class="bg-red-900/20 p-3 rounded-2xl border border-red-500/30">
                    <h4 class="text-[10px] font-bold text-red-400 mb-2 uppercase text-right">Campo B</h4>
                    <div id="list-team-b" class="space-y-2"></div>
                </div>
            </div>

            <div class="bg-slate-800 p-5 rounded-2xl border border-slate-700">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xs font-bold text-slate-400 uppercase">Próximos na Fila</h3>
                    <span id="wait-count" class="bg-slate-700 text-slate-100 text-[10px] px-2 py-0.5 rounded-full">0</span>
                </div>
                <div id="list-waiting" class="flex flex-wrap gap-2"></div>
            </div>

            <div id="punished-container" class="bg-red-600/10 p-4 rounded-2xl border border-red-600/40 hidden">
                <h3 class="text-[10px] font-black text-red-500 uppercase mb-3 tracking-widest">Área de Suspensão (VM)</h3>
                <div id="list-punished" class="space-y-2"></div>
            </div>

            <div class="grid grid-cols-2 gap-3">
                <button onclick="confirmWinner('A')" class="bg-blue-600 py-4 rounded-xl font-black text-sm shadow-lg shadow-blue-900/30">VENCEDOR A</button>
                <button onclick="confirmWinner('B')" class="bg-red-600 py-4 rounded-xl font-black text-sm shadow-lg shadow-red-900/30">VENCEDOR B</button>
            </div>
        </section>

        <!-- Tab: Rank -->
        <section id="tab-rank" class="tab-content hidden space-y-4">
            <div class="bg-slate-800 p-4 rounded-2xl border border-slate-700 overflow-hidden shadow-xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-sm font-bold uppercase text-slate-400">Tabela de Classificação</h3>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-xs">
                        <thead>
                            <tr class="text-slate-500 border-b border-slate-700">
                                <th class="py-2">ATLETA</th>
                                <th class="py-2 text-center">G</th>
                                <th class="py-2 text-center">A</th>
                                <th class="py-2 text-center">V</th>
                                <th class="py-2 text-center">J</th>
                                <th class="py-2 text-center">APR%</th>
                            </tr>
                        </thead>
                        <tbody id="rank-table-body"></tbody>
                    </table>
                </div>
            </div>
        </section>

    </main>

    <!-- Modal para Eventos -->
    <div id="modal-event" class="fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 hidden">
        <div class="bg-slate-800 w-full max-w-sm rounded-3xl border border-slate-700 p-6 shadow-2xl">
            <h2 id="modal-title" class="text-xl font-black mb-1">REGISTAR</h2>
            <p id="modal-desc" class="text-xs text-slate-500 mb-6 uppercase tracking-wider">Ação necessária</p>
            <div id="modal-player-list" class="space-y-2 max-h-[50vh] overflow-y-auto pr-2"></div>
            <button onclick="closeModal()" class="w-full mt-6 py-3 text-slate-400 font-bold text-xs uppercase">Fechar</button>
        </div>
    </div>

    <script>
        // --- ESTADO GLOBAL COM PERSISTÊNCIA ---
        let db = {
            session: JSON.parse(localStorage.getItem('asmeto_session')) || null,
            players: JSON.parse(localStorage.getItem('asmeto_players')) || [],
            currentMatch: JSON.parse(localStorage.getItem('asmeto_match_state')) || {
                teamA: [], teamB: [], waiting: [], punished: [],
                scoreA: 0, scoreB: 0, winsA: 0, winsB: 0,
                timeLeft: 600, isRunning: false
            }
        };

        let timerInt = null;
        let lastPhoto = null;
        const VM_TIME = 90;

        window.onload = () => {
            initCamera();
            if(db.session) {
                document.getElementById('active-session-title').innerText = db.session.name;
                renderAll();
                // Se o timer estava a correr, pausamos por segurança
                db.currentMatch.isRunning = false;
                saveData();
            }
        };

        function initCamera() {
            const video = document.getElementById('webcam');
            navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } })
                .then(stream => video.srcObject = stream)
                .catch(err => console.warn("Câmara inacessível"));
        }

        function saveData() {
            localStorage.setItem('asmeto_session', JSON.stringify(db.session));
            localStorage.setItem('asmeto_players', JSON.stringify(db.players));
            localStorage.setItem('asmeto_match_state', JSON.stringify(db.currentMatch));
        }

        function clearAllData() {
            if(confirm("Deseja apagar TUDO? Jogadores e histórico serão perdidos.")) {
                localStorage.clear();
                location.reload();
            }
        }

        // --- NAVEGAÇÃO ---
        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            document.getElementById(`tab-${tab}`).classList.remove('hidden');
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('bg-blue-600');
                if(b.innerText.toLowerCase().includes(tab === 'players' ? 'elenco' : (tab === 'rank' ? 'ranking' : (tab === 'setup' ? 'sessão' : 'jogo')))) {
                    b.classList.add('bg-blue-600');
                }
            });
        }

        // --- SESSÃO E SORTEIO ---
        function startNewSession() {
            const name = document.getElementById('in-session-name').value;
            if(!name) return;
            
            db.session = {
                id: Date.now(),
                name: name,
                teamSize: parseInt(document.getElementById('in-team-size').value),
                matchMinutes: parseInt(document.getElementById('in-match-time').value)
            };

            db.currentMatch = {
                teamA: [], teamB: [], waiting: [], punished: [],
                scoreA: 0, scoreB: 0, winsA: 0, winsB: 0,
                timeLeft: db.session.matchMinutes * 60,
                isRunning: false
            };

            document.getElementById('active-session-title').innerText = name;
            saveData();
            showTab('players');
            renderAll();
        }

        function takeSnapshot() {
            const video = document.getElementById('webcam');
            const canvas = document.getElementById('photo-canvas');
            const preview = document.getElementById('photo-preview');
            canvas.width = 300;
            canvas.height = 225;
            canvas.getContext('2d').drawImage(video, 0, 0, 300, 225);
            lastPhoto = canvas.toDataURL('image/webp');
            preview.src = lastPhoto;
            preview.classList.remove('hidden');
        }

        function registerPlayer() {
            const name = document.getElementById('in-player-name').value;
            if(!name) return;

            const player = {
                id: 'P' + Date.now(),
                name: name,
                photo: lastPhoto || 'https://via.placeholder.com/150',
                present: true,
                stats: { g: 0, a: 0, v: 0, j: 0 }
            };

            db.players.push(player);
            
            // Regra: Entrar no TOPO da fila se já houver jogo
            if(db.currentMatch.teamA.length > 0) {
                db.currentMatch.waiting.unshift(player.id);
            }

            document.getElementById('in-player-name').value = "";
            document.getElementById('photo-preview').classList.add('hidden');
            lastPhoto = null;
            
            saveData();
            renderAll();
        }

        function runAutomaticDraw() {
            const present = db.players.filter(p => p.present);
            if(present.length < db.session.teamSize * 2) return;

            const sorted = [...present].sort((a,b) => a.id.localeCompare(b.id));
            
            db.currentMatch.teamA = sorted.slice(0, db.session.teamSize).map(p => p.id);
            db.currentMatch.teamB = sorted.slice(db.session.teamSize, db.session.teamSize * 2).map(p => p.id);
            db.currentMatch.waiting = sorted.slice(db.session.teamSize * 2).map(p => p.id);
            
            saveData();
            showTab('match');
            renderAll();
        }

        // --- JOGO ---
        function toggleTimer() {
            const icon = document.getElementById('timer-icon');
            if(db.currentMatch.isRunning) {
                clearInterval(timerInt);
                icon.setAttribute('d', 'M8 5v14l11-7z');
            } else {
                timerInt = setInterval(tick, 1000);
                icon.setAttribute('d', 'M6 19h4V5H6v14zm8-14v14h4V5h-4z');
            }
            db.currentMatch.isRunning = !db.currentMatch.isRunning;
            saveData();
        }

        function tick() {
            if(db.currentMatch.timeLeft > 0) {
                db.currentMatch.timeLeft--;
                
                db.currentMatch.punished.forEach(p => {
                    if(p.seconds > 0) p.seconds--;
                });

                if(db.currentMatch.timeLeft % 5 === 0) saveData(); // Auto-save a cada 5s
                renderTimer();
                renderPunished();
            } else {
                toggleTimer();
            }
        }

        function renderTimer() {
            const m = Math.floor(db.currentMatch.timeLeft / 60);
            const s = db.currentMatch.timeLeft % 60;
            const el = document.getElementById('match-timer');
            el.innerText = `${m}:${s.toString().padStart(2,'0')}`;
            db.currentMatch.timeLeft < 60 ? el.classList.add('timer-active') : el.classList.remove('timer-active');
        }

        function openEventModal(type, pid) {
            const modal = document.getElementById('modal-event');
            const list = document.getElementById('modal-player-list');
            const title = document.getElementById('modal-title');
            modal.classList.remove('hidden');
            list.innerHTML = "";

            if(type === 'goal') {
                title.innerText = "GOLO DE QUEM?";
                const team = db.currentMatch.teamA.includes(pid) ? db.currentMatch.teamA : db.currentMatch.teamB;
                team.forEach(id => {
                    const p = db.players.find(x => x.id === id);
                    const btn = document.createElement('button');
                    btn.className = "w-full bg-slate-900 p-3 rounded-xl flex items-center gap-3";
                    btn.innerHTML = `<img src="${p.photo}" class="w-8 h-8 rounded-full object-cover"> <span class="font-bold text-sm">${p.name}</span>`;
                    btn.onclick = () => registerGoal(id);
                    list.appendChild(btn);
                });
            } else if (type === 'card_y') {
                const p = db.players.find(x => x.id === pid);
                if(!db.currentMatch.punished.some(x => x.id === pid)) {
                    db.currentMatch.punished.push({ id: pid, seconds: VM_TIME });
                }
                closeModal();
                renderAll();
                saveData();
            }
        }

        function registerGoal(scorerId) {
            const p = db.players.find(x => x.id === scorerId);
            p.stats.g++;
            db.currentMatch.teamA.includes(scorerId) ? db.currentMatch.scoreA++ : db.currentMatch.scoreB++;
            
            closeModal();
            renderAll();
            saveData();

            // Assistência
            setTimeout(() => {
                const modal = document.getElementById('modal-event');
                const list = document.getElementById('modal-player-list');
                const title = document.getElementById('modal-title');
                modal.classList.remove('hidden');
                title.innerText = "ASSISTÊNCIA?";
                list.innerHTML = "";
                
                const team = db.currentMatch.teamA.includes(scorerId) ? db.currentMatch.teamA : db.currentMatch.teamB;
                team.filter(id => id !== scorerId).forEach(id => {
                    const ap = db.players.find(x => x.id === id);
                    const btn = document.createElement('button');
                    btn.className = "w-full bg-slate-900 p-3 rounded-xl flex items-center gap-3";
                    btn.innerHTML = `<img src="${ap.photo}" class="w-8 h-8 rounded-full"> <span class="text-sm">${ap.name}</span>`;
                    btn.onclick = () => { ap.stats.a++; closeModal(); renderAll(); saveData(); };
                    list.appendChild(btn);
                });
                const none = document.createElement('button');
                none.className = "w-full border border-slate-700 p-3 rounded-xl text-slate-500 text-xs font-bold";
                none.innerText = "GOLO INDIVIDUAL";
                none.onclick = closeModal;
                list.appendChild(none);
            }, 300);
        }

        function confirmWinner(winner) {
            [...db.currentMatch.teamA, ...db.currentMatch.teamB].forEach(pid => {
                db.players.find(x => x.id === pid).stats.j++;
            });

            if(winner === 'A') {
                db.currentMatch.winsA++;
                db.currentMatch.winsB = 0;
                db.currentMatch.teamA.forEach(id => db.players.find(x => x.id === id).stats.v++);
                rotateOut('B');
                if(db.currentMatch.winsA >= 3) { rotateOut('A'); db.currentMatch.winsA = 0; }
            } else {
                db.currentMatch.winsB++;
                db.currentMatch.winsA = 0;
                db.currentMatch.teamB.forEach(id => db.players.find(x => x.id === id).stats.v++);
                rotateOut('A');
                if(db.currentMatch.winsB >= 3) { rotateOut('B'); db.currentMatch.winsB = 0; }
            }

            db.currentMatch.scoreA = 0;
            db.currentMatch.scoreB = 0;
            db.currentMatch.timeLeft = db.session.matchMinutes * 60;
            db.currentMatch.punished = [];
            
            saveData();
            renderAll();
        }

        function rotateOut(side) {
            const team = side === 'A' ? db.currentMatch.teamA : db.currentMatch.teamB;
            db.currentMatch.waiting.push(...team);
            const next = db.currentMatch.waiting.splice(0, db.session.teamSize);
            side === 'A' ? db.currentMatch.teamA = next : db.currentMatch.teamB = next;
        }

        // --- RENDERIZADORES ---
        function renderAll() {
            renderRoster();
            renderTeams();
            renderWaiting();
            renderPunished();
            renderTimer();
            renderRank();
            
            document.getElementById('match-score-a').innerText = db.currentMatch.scoreA;
            document.getElementById('match-score-b').innerText = db.currentMatch.scoreB;
            document.getElementById('match-wins-a').innerText = `VITÓRIAS: ${db.currentMatch.winsA}/3`;
            document.getElementById('match-wins-b').innerText = `VITÓRIAS: ${db.currentMatch.winsB}/3`;
        }

        function renderRoster() {
            const list = document.getElementById('roster-list');
            list.innerHTML = db.players.map(p => `
                <div class="bg-slate-900 p-3 rounded-xl flex items-center justify-between border ${p.present ? 'border-green-500/30' : 'border-slate-700'}">
                    <div class="flex items-center gap-3">
                        <img src="${p.photo}" class="w-8 h-8 rounded-full object-cover">
                        <span class="text-xs font-bold">${p.name}</span>
                    </div>
                    <input type="checkbox" ${p.present ? 'checked' : ''} onchange="toggleP('${p.id}')" class="w-4 h-4">
                </div>
            `).join('');
        }

        function toggleP(id) {
            const p = db.players.find(x => x.id === id);
            p.present = !p.present;
            saveData();
            renderRoster();
        }

        function renderTeams() {
            const build = (pid) => {
                const p = db.players.find(x => x.id === pid);
                const isP = db.currentMatch.punished.some(x => x.id === pid && x.seconds > 0);
                return `
                    <div class="bg-slate-900 p-2 rounded-xl border border-slate-800 ${isP ? 'punished' : ''}">
                        <div class="flex items-center gap-2 mb-2">
                            <img src="${p.photo}" class="w-6 h-6 rounded object-cover">
                            <span class="text-[9px] font-bold truncate">${p.name}</span>
                        </div>
                        <div class="flex gap-1">
                            <button onclick="openEventModal('goal', '${pid}')" class="flex-1 bg-green-600 text-[8px] py-1 rounded font-bold">GOL</button>
                            <button onclick="openEventModal('card_y', '${pid}')" class="flex-1 bg-yellow-500 text-[8px] py-1 rounded font-bold text-black">VM</button>
                        </div>
                    </div>
                `;
            };
            document.getElementById('list-team-a').innerHTML = db.currentMatch.teamA.map(build).join('');
            document.getElementById('list-team-b').innerHTML = db.currentMatch.teamB.map(build).join('');
        }

        function renderWaiting() {
            const list = document.getElementById('list-waiting');
            document.getElementById('wait-count').innerText = db.currentMatch.waiting.length;
            list.innerHTML = db.currentMatch.waiting.map(id => {
                const p = db.players.find(x => x.id === id);
                return `<div class="bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-[10px] font-bold">${p.name.split(' ')[0]}</div>`;
            }).join('');
        }

        function renderPunished() {
            const container = document.getElementById('punished-container');
            const list = document.getElementById('list-punished');
            const active = db.currentMatch.punished.filter(p => p.seconds > 0);
            
            if(active.length > 0) {
                container.classList.remove('hidden');
                list.innerHTML = active.map(p => {
                    const player = db.players.find(x => x.id === p.id);
                    return `<div class="flex justify-between text-[10px] font-bold bg-black/20 p-2 rounded"><span>${player.name}</span><span class="text-red-500">${p.seconds}s</span></div>`;
                }).join('');
            } else {
                container.classList.add('hidden');
            }
        }

        function renderRank() {
            const body = document.getElementById('rank-table-body');
            const sorted = [...db.players].sort((a,b) => b.stats.v - a.stats.v || b.stats.g - a.stats.g);
            body.innerHTML = sorted.map(p => `
                <tr class="border-b border-slate-800">
                    <td class="py-2 flex items-center gap-2"><img src="${p.photo}" class="w-5 h-5 rounded-full object-cover"><span>${p.name}</span></td>
                    <td class="text-center font-bold text-green-500">${p.stats.g}</td>
                    <td class="text-center">${p.stats.a}</td>
                    <td class="text-center font-bold">${p.stats.v}</td>
                    <td class="text-center">${p.stats.j}</td>
                    <td class="text-center text-slate-400">${p.stats.j ? ((p.stats.v/p.stats.j)*100).toFixed(0) : 0}%</td>
                </tr>
            `).join('');
        }

        function closeModal() { document.getElementById('modal-event').classList.add('hidden'); }
    </script>
</body>
</html>